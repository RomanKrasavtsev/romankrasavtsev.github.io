<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Roman Krasavtsev - Software Engineer, Full Stack</title>
  <script src="https://d3js.org/d3.v4.min.js"></script>
  <style>
    body {
      background: #f2f3f2;
      font-family: 'Helvetica Neue', Helvetica;
      font-weight: 300;
      text-anchor: middle;
    }
    .title {
      font-size: 30px;
    }
  </style>
</head>
<body>
  <script>
    var data = {
      nodes: [
        { label: "AWS", r: 22, fill: "rgb(248, 178, 12)", color: "rgb(0, 0, 0)" },
        { label: "Ruby", r: 23, fill: "rgb(163, 12, 1)", color: "rgb(255, 255, 255)" },
        { label: "Ruby on Rails", r: 53, fill: "white", color: "rgb(204, 0, 0)" },
        { label: "RHEL", r: 18, fill: "rgb(0, 0, 0)", color: "red" },
        { label: "C", r: 10, fill: "white", color: "rgb(0, 0, 0)" },
        { label: "SQL", r: 15, fill: "blue", color: "white" },
        { label: "PostgreSQL", r: 39, fill: "rgb(50, 102, 144)", color: "white" },
        { label: "JavaScript", r: 35, fill: "rgb(247, 223, 30)", color: "rgb(0, 0, 0)" },
        { label: "Jenkins", r: 30, fill: "white", color: "rgb(0, 0, 0)" },
        { label: "Docker", r: 28, fill: "rgb(18, 74, 106)", color: "white" },
        { label: "Redis", r: 22, fill: "rgb(180, 37, 17)", color: "white" },
        { label: "MongoDB", r: 37, fill: "rgb(68, 154, 69)", color: "white" },
        { label: "Git", r: 15, fill: "rgb(240, 80, 51)", color: "rgb(0, 0, 0)" },
        { label: "D3.js", r: 23, fill: "white", color: "rgb(247, 156, 67)" },
        { label: "CSS", r: 16, fill: "rgb(1, 113, 187)", color: "white" },
        { label: "HTML", r: 22, fill: "rgb(228, 77, 38)", color: "white" },
        { label: "jQuery", r: 29, fill: "rgb(16, 105, 173)", color: "rgb(0, 0, 0)" },
        { label: "AngularJS", r: 37, fill: "rgb(221, 49, 54)", color: "rgb(0, 0, 0)" },
        { label: "React", r: 23, fill: "rgb(34, 34, 34)", color: "rgb(97, 218, 251)" }
      ]
    };

    data.links = d3.range(0, data.nodes.lenght).map(function() {
      return { source: ~~d3.randomUniform(range)(), target:~~d3.randomUniform(range)()}
    });

    var height = 600;
    var width = 1280;

    var body = d3.select("body");

    var svg = body.append("svg")
      .attr("height", height)
      .attr("width", width);

    var title = svg.append("g")
      .classed("title", true);

    title.append("text")
      .text("Roman Krasavtsev")
      .attr("x", width / 2)
      .attr("y", 30);

    title.append("text")
      .text("Software Engineer, Full Stack")
      .attr("x", width / 2)
      .attr("y", 70);

    var colorScale = d3.scaleOrdinal(d3.schemeCategory20);

    var simulation = d3.forceSimulation()
        .force("link", d3.forceLink().id(function(d) { return d.index }))
        .force("collide",d3.forceCollide( function(d){return d.r + 8 }).iterations(16) )
        .force("charge", d3.forceManyBody())
        .force("center", d3.forceCenter(width / 2, 300))
        .force("y", d3.forceY(0))
        .force("x", d3.forceX(0));

    var link = svg.append("g")
        .attr("class", "links")
        .selectAll("line")
        .data(data.links)
        .enter()
        .append("line")
        .attr("stroke", "black");

    var colorScale = d3.scaleOrdinal(d3.schemeCategory20);

    var node = svg.selectAll(".node")
      .data(data.nodes)
      .enter()
      .append("g")
      .classed("node", true)
      .call(d3.drag()
          .on("start", dragstarted)
          .on("drag", dragged)
          .on("end", dragended));

    node.append("circle")
      .attr("r", function(d){  return d.r })
      .attr("fill", function(d) {
        return d.fill;
      });

    node.append("text")
      .style("text-anchor", "middle")
      .text(function(d) {
        return d.label;
      })
      .attr("transform", "translate(0, 4)")
      .attr("fill", function(d) {
        return d.color;
      });

    var ticked = function() {
      node.attr("transform", function(d) {
        return 'translate(' + [d.x, d.y] + ')';
      });
    };

    simulation
        .nodes(data.nodes)
        .on("tick", ticked);

    simulation.force("link")
        .links(data.links);

    function dragstarted(d) {
        if (!d3.event.active) simulation.alphaTarget(0.3).restart();
        d.fx = d.x;
        d.fy = d.y;
    }

    function dragged(d) {
        d.fx = d3.event.x;
        d.fy = d3.event.y;
    }

    function dragended(d) {
        if (!d3.event.active) simulation.alphaTarget(0);
        d.fx = null;
        d.fy = null;
    }
  </script>
</body>
</html>
